#!/bin/bash

# execute load benchmark with inputs in inputs.txt
# threads sizes are generated by test-script.py 
# with the inputs in inputs.txt or the file passed
# as argument of this script


DEFAULT_INPUT=inputs.txt

inputs=${1:-$DEFAULT_INPUT}

cat ${inputs} | ./test-script.py | ../load | awk '/Throughput/ {print($3)}' | sort -nr
